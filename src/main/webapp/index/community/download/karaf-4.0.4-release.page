---
title: Karaf 4.0.4 Release
page_version: 1
page_creator: jbonofre
page_modifier: jbonofre
--- pipeline:conf
h2. Download

Download links can be found in the [Download|/index/community/download.html] page.

h2. Documentation

- [Manual|http://karaf.apache.org/manual/latest/index.html]
-- [User Guide|http://karaf.apache.org/manual/latest/users-guide/index.html]
-- [Developer Guide|http://karaf.apache.org/manual/latest/developers-guide/index.html]
-- [Commands reference|http://karaf.apache.org/manual/latest/commands/commands.html]

h2. Release Notes - Karaf - Version 4.0.4

 This is an update patch for Apache Karaf 4.0.x, containing many bug fixes, dependency updates, and improvements.

 For more information, please see the below changelog:

h3. Bug
 * [KARAF-3303] - "keyStoreAvailabilityTimeout" is treated as boolean in JMX configuration
 * [KARAF-3812] - Exception caused by featuresRepositories property being set incorrectly
 * [KARAF-3918] - An installed blueprint.xml has always been updated and restarted when install another unrelated feature
 * [KARAF-3985] - ArrayIndexOutOfBoundsException is thrown after configure http/https and limit access from localhost,127.0.0.1
 * [KARAF-4031] - Unresolved repository inside the feature causes Karaf freezing during startup
 * [KARAF-4083] - Reference to the invalid repository in feature file breaks commands
 * [KARAF-4118] - Command service declaration doesn't work
 * [KARAF-4119] - la outputs results twice
 * [KARAF-4132] - assembly archetype should remove runtime scope to the standard features XML
 * [KARAF-4134] - karaf-maven-plugin mixes up prerequisities
 * [KARAF-4138] - wrapper:install doesn't work on Windows due to path issues in karaf.home and karaf.data
 * [KARAF-4139] - Bundles with activation policy lazy remain in status starting when run with equinox
 * [KARAF-4142] - Allow for relative URLs from a Cave repository
 * [KARAF-4145] - KAR is created with defect maven metadata
 * [KARAF-4150] - bin/status fails if KARAF_DEBUG is set
 * [KARAF-4152] - Resolution of relative URLs from OBR repositories not working when there are multiple URLs
 * [KARAF-4155] - Fall to feature start-level
 * [KARAF-4159] - FeatureResolver: Wrong dependencies installed
 * [KARAF-4169] - Blueprint creates unnecessary prototype bean instances
 * [KARAF-4184] - ArgumentCompleter has incorrect check for enum type
 * [KARAF-4218] - JAAS boot classes are not marked serializable
 * [KARAF-4226] - Web Console is missing package exports for bundleinfo and i18n
 * [KARAF-4241] - Karaf clean doesn't work if KARAF_DATA and KARAF_BASE point to same dir
 * [KARAF-4246] - sshd 0.14.0 breaks client timeout
 * [KARAF-4247] - Issues with LDAP caching
 * [KARAF-4252] - scr feature doesn't install the WebConsole DS plugin
 * [KARAF-4254] - NPE when building karaf-assembly target with installAllFeaturesByDefault=false

h3. Dependency upgrade
 * [KARAF-4117] - Upgrade to Pax Web 4.2.4
 * [KARAF-4126] - Upgrade Cglib bundle to version 3.1_1
 * [KARAF-4135] - Upgrade commons-collections to version 3.2.2
 * [KARAF-4136] - Upgrade Maven-bundle-plugin to version 3.0.1
 * [KARAF-4149] - Upgrade to Derby 10.12.1.1
 * [KARAF-4151] - Upgrade Felix Coordinator to version 1.0.2
 * [KARAF-4168] - Upgrade to Pax Exam 4.7.0
 * [KARAF-4182] - Upgrade to Spring 4.2.3.RELEASE
 * [KARAF-4185] - Upgrade Pax-url to version 2.4.4
 * [KARAF-4196] - Upgrade Cglib to version 3.2.0
 * [KARAF-4197] - Upgrade to blueprint.core-1.5.0, jpa-2.3.0, transaction.blueprint-2.1.0
 * [KARAF-4220] - Upgrade to eclipselink 2.6.1
 * [KARAF-4227] - Upgrade to Pax-exam 4.8.0
 * [KARAF-4228] - Upgrade to Aries Subsystem 2.0.8
 * [KARAF-4230] - Upgrade to Aries Blueprint Core 1.5.0
 * [KARAF-4233] - Upgrade to Aries JPA Container 1.0.3
 * [KARAF-4238] - Upgrade to Pax URL 2.4.5
 * [KARAF-4239] - Upgrade to Pax-Logging 1.8.5

h3. Documentation
 * [KARAF-3679] - Change current documentation from Scalate to Asciidoc

h3. Improvement
 * [KARAF-2966] - scr:details - Sort the properties so its easier for humans to read
 * [KARAF-3100] - Add Option To Create Config Files For Feature Configs Instead Of Importing Directly Into Config Admin
 * [KARAF-3278] - Display warning message when trying to install an already installed bundle
 * [KARAF-3390] - Karaf client should allow passing arguments to command
 * [KARAF-3880] - Provide a standard feature just wrapping all boot features from the standard distribution
 * [KARAF-3982] - Be able to change standard files during distribution assembly
 * [KARAF-4082] - .kar file generated by karaf-maven-plugin does not contain all jars (no offline support)
 * [KARAF-4102] - It should be possible to change the primary feature name to be other than the artifact id
 * [KARAF-4130] - Use OSGi Resource repositories in features XML
 * [KARAF-4166] - Add karaf.lock.slave.block property to prevent a slave instance to start
 * [KARAF-4193] - Add option to dev:dump-create command (and MBean) to exclude heap and thread dumps
 * [KARAF-4198] - Support m2e incremental build in karaf-services-plugin
 * [KARAF-4242] - Add apache artemis to repo-add shorthand list
 * [KARAF-4243] - Add apache ignite to feature repo:add shorthand

h3. New Feature
 * [KARAF-222] - Provide karaf:run, karaf:deploy, karaf:client Maven goals
 * [KARAF-545] - Config file creation and update from features descriptor
 * [KARAF-3259] - Add support for executing of OSGi commands with karaf-maven-plugin
 * [KARAF-4240] - Provide Asciidoc command help printer
